#!/usr/bin/env perl

use strict;
use warnings;
use Genentech::Unison;

my $u = new Genentech::Unison;

my (@sp) = ( @{ $u->selectall_arrayref( "select sunid,pdb||lower(substr(def,1,1)) from scop.cla where def ~ '^.:\$'" ) }, # whole chain
			 @{ $u->selectall_arrayref( "select sunid,pdb from scop.cla where def = '-'" ) }, # unspecified chain
			 @{ $u->selectall_arrayref( "select sunid,sid from scop.cla" ) } # scopid
		   );

for(my $i=0; $i<=$#sp; $i++)
  {
  printf("update unison.p2template set sunid=%d where name='%s';\n",
		 @{$sp[$i]});
  }
